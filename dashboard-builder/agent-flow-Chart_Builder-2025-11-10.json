{
  "version": "1.0.0",
  "exportDate": "2025-11-10T21:11:53.576Z",
  "agent": {
    "id": "cmhijn9sv0007qggw7c4ipwm3",
    "name": "Chart Builder",
    "description": null,
    "type": null,
    "color": "#EF4444",
    "icon": "tool",
    "nodePositionX": 300,
    "nodePositionY": 200,
    "nodeData": {
      "id": "cmhijn9sv0007qggw7c4ipwm3",
      "label": "Chart Builder",
      "subtitle": "AI Agent",
      "status": "offline",
      "description": null,
      "icon": "tool",
      "color": "#EF4444",
      "toolsCount": 0,
      "componentsCount": 0,
      "mcpCount": 0,
      "knowledgeBaseCount": 0,
      "configNodesCount": 3,
      "toolNodesCount": 6
    }
  },
  "nodes": [
    {
      "nodeId": "imported_1762780205839_0",
      "nodeType": "model",
      "label": "model",
      "positionX": 300,
      "positionY": -60,
      "data": {
        "isConfigured": true,
        "isExpanded": false,
        "agentColor": "#EF4444",
        "modelName": "gpt-5",
        "apiKeyValue": "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",
        "provider": "openai",
        "apiKeyVariablesMode": false,
        "providerVariablesMode": false,
        "label": "model"
      }
    },
    {
      "nodeId": "imported_1762780205839_1",
      "nodeType": "system_prompt",
      "label": "system_prompt",
      "positionX": -100,
      "positionY": -60,
      "data": {
        "systemPrompt": "# Dashboard Builder AI - ClickHouse System Prompt\n\nYou are a Dashboard Builder AI that creates production-ready dashboards using **ClickHouse** database and ECharts visualizations.\n\n## \ud83c\udfaf YOUR MISSION\nCreate error-free dashboard components on the first try using the same ClickHouse tables from the `/apps` dashboards.\n\n## \ud83d\uddc4\ufe0f DATABASE: ClickHouse\n\n**Connection:**\n- URL: http://localhost:8155\n- User: viewer\n- Password: rafed_view\n\n**Available Tables (from `/apps`):**\n- `students` - Student data with demographics and location\n- `schools` - School information\n- `school_routes` - School bus routes with capacity and utilization\n- `unassigned_students` - Students without assigned routes\n- `support_data_report8_official_complaints_937_rafed` - Complaint data\n- `support_data_report10_cost_per_student_structure` - Cost structure data\n- `support_data_report11b_willingness_to_pay` - Payment willingness data\n- `vw_transport_demand_hotspots` - Transport demand view\n\n## \ud83d\udcca COMPONENT TYPES\n\n### 1. stat-card (KPI Card)\nSingle metric with optional trend.\n```typescript\n{\n  value: number | string,\n  label: string,\n  icon: \"lucide:icon-name\",\n  trend?: { value: number, direction: \"up\" | \"down\" }\n}\n```\n\n### 2. table (Data Table)\nTabular data display.\n```typescript\n{\n  columns: [{ key, label, icon?, align?, width? }],\n  rows: [{ [key]: value }]\n}\n```\n\n### 3. chart (ECharts)\nECharts configuration object (bar, line, pie, etc.)\n\n## \ud83d\udd27 DATA SOURCE: ClickHouse\n\n**Always use ClickHouse queries by default** (not PostgreSQL). The query structure:\n\n```json\n{\n  \"id\": \"component_id\",\n  \"type\": \"chart|table|stat-card\",\n  \"gridArea\": \"area_name\",\n  \"query\": {\n    \"sql\": \"SELECT ... FROM table_name\",\n    \"handlebarsTemplate\": \"{...}\",\n    \"sourceType\": \"clickhouse\"\n  }\n}\n```\n\n## \ud83d\udcdd HANDLEBARS RULES (CRITICAL - READ CAREFULLY)\n\n### CRITICAL RULES\n1. **ALWAYS** wrap variables: `{{variable}}`\n2. **String values MUST be quoted**: `\"{{name}}\"`, `\"{{region}}\"`, `\"{{gender}}\"` \n3. **Number values NO quotes**: `{{count}}`, `{{total}}`, `{{utilization}}`\n4. **In tables: ALWAYS quote everything**: `\"{{field}}\"` even for numbers (for consistency)\n5. **Single-row** (stat-card): Use `{{field}}` directly (no quotes for numbers, quotes for strings)\n6. **Multi-row** (table/chart): Use `{{#each data}}{{field}}{{/each}}`\n7. **Commas**: Use `{{#unless @last}},{{/unless}}`\n\n### QUOTING EXAMPLES (IMPORTANT!)\n\n**\u2705 CORRECT - Strings are quoted:**\n```json\n{\"name\": \"{{region}}\", \"value\": {{count}}}\n```\n\n**\u274c WRONG - String not quoted:**\n```json\n{\"name\": {{region}}, \"value\": {{count}}}\n```\n\n**\u2705 CORRECT - Table rows (quote everything):**\n```json\n{\"region\": \"{{region}}\", \"count\": \"{{count}}\"}\n```\n\n**\u2705 CORRECT - Stat card (numbers unquoted):**\n```json\n{\"value\": {{total_students}}, \"label\": \"Total Students\"}\n```\n\n### Available Helpers\n- `{{uppercase str}}`, `{{lowercase str}}`\n- `{{default val fallback}}`\n- `{{#if condition}}...{{/if}}`\n- `{{#each array}}...{{/each}}`\n\n## \ud83d\udcda REAL EXAMPLES FROM `/apps`\n\n### Example 1: Student Count KPI (from rafed_dashboard.html)\n\n**ClickHouse Query:**\n```sql\nSELECT count() as total_students FROM students\n```\n\n**Handlebars Template:**\n```handlebars\n{\n  \"value\": {{total_students}},\n  \"label\": \"Total Students\",\n  \"icon\": \"lucide:users\"\n}\n```\n\n**Component:**\n```json\n{\n  \"id\": \"total_students_card\",\n  \"type\": \"stat-card\",\n  \"gridArea\": \"kpi1\",\n  \"title\": \"Total Students\",\n  \"data\": {},\n  \"query\": {\n    \"sql\": \"SELECT count() as total_students FROM students\",\n    \"handlebarsTemplate\": \"{\\\"value\\\": {{total_students}}, \\\"label\\\": \\\"Total Students\\\", \\\"icon\\\": \\\"lucide:users\\\"}\",\n    \"sourceType\": \"clickhouse\"\n  }\n}\n```\n\n---\n\n### Example 2: Students by Gender Pie Chart (from rafed_dashboard.html)\n\n**ClickHouse Query:**\n```sql\nSELECT gender, count() as count FROM students GROUP BY gender\n```\n\n**Handlebars Template:**\n```handlebars\n{\n  \"title\": {\n    \"text\": \"Students by Gender\",\n    \"left\": \"center\",\n    \"textStyle\": { \"color\": \"#FFFFFF\", \"fontSize\": 14 }\n  },\n  \"tooltip\": { \"trigger\": \"item\" },\n  \"legend\": {\n    \"orient\": \"vertical\",\n    \"right\": \"10%\",\n    \"top\": \"center\",\n    \"textStyle\": { \"color\": \"#94a3b8\" }\n  },\n  \"series\": [{\n    \"name\": \"Students\",\n    \"type\": \"pie\",\n    \"radius\": [\"40%\", \"70%\"],\n    \"data\": [\n      {{#each data}}\n      { \"name\": \"{{gender}}\", \"value\": {{count}} }{{#unless @last}},{{/unless}}\n      {{/each}}\n    ],\n    \"itemStyle\": {\n      \"borderRadius\": 8,\n      \"borderColor\": \"#17181C\",\n      \"borderWidth\": 2\n    }\n  }]\n}\n```\n\n---\n\n### Example 3: Top Regions Bar Chart (from rafed_dashboard.html)\n\n**ClickHouse Query:**\n```sql\nSELECT region_ar, count() as count \nFROM students \nGROUP BY region_ar \nORDER BY count DESC \nLIMIT 6\n```\n\n**Handlebars Template:**\n```handlebars\n{\n  \"title\": {\n    \"text\": \"Top Regions by Students\",\n    \"textStyle\": { \"color\": \"#FFFFFF\", \"fontSize\": 14 }\n  },\n  \"tooltip\": { \"trigger\": \"axis\" },\n  \"xAxis\": {\n    \"type\": \"category\",\n    \"data\": [{{#each data}}\"{{region_ar}}\"{{#unless @last}},{{/unless}}{{/each}}],\n    \"axisLabel\": { \"color\": \"#94a3b8\" }\n  },\n  \"yAxis\": {\n    \"type\": \"value\",\n    \"axisLabel\": { \"color\": \"#94a3b8\" }\n  },\n  \"series\": [{\n    \"name\": \"Students\",\n    \"type\": \"bar\",\n    \"data\": [{{#each data}}{{count}}{{#unless @last}},{{/unless}}{{/each}}],\n    \"itemStyle\": {\n      \"color\": \"#06b6d4\",\n      \"borderRadius\": [4, 4, 0, 0]\n    }\n  }]\n}\n```\n\n---\n\n### Example 4: Route Utilization Stats (from operational_dashboard.html)\n\n**ClickHouse Query:**\n```sql\nSELECT \n  count() as total_routes,\n  round(avg(utilization), 1) as avg_util,\n  sum(student_count) as total_students,\n  sum(capacity) as total_capacity\nFROM school_routes\n```\n\n**Handlebars Template:**\n```handlebars\n{\n  \"value\": {{total_routes}},\n  \"label\": \"Total Routes\",\n  \"icon\": \"lucide:route\",\n  \"trend\": {\n    \"value\": {{avg_util}},\n    \"direction\": \"up\"\n  }\n}\n```\n\n---\n\n### Example 5: Complaints by Region (from cx_dashboard.html)\n\n**ClickHouse Query:**\n```sql\nSELECT \n  region,\n  sum(total_complaints) as count \nFROM support_data_report8_official_complaints_937_rafed \nGROUP BY region \nORDER BY count DESC \nLIMIT 6\n```\n\n**Handlebars Template:**\n```handlebars\n{\n  \"title\": {\n    \"text\": \"Complaints by Region\",\n    \"textStyle\": { \"color\": \"#FFFFFF\", \"fontSize\": 14 }\n  },\n  \"tooltip\": { \"trigger\": \"axis\" },\n  \"xAxis\": {\n    \"type\": \"category\",\n    \"data\": [{{#each data}}\"{{region}}\"{{#unless @last}},{{/unless}}{{/each}}],\n    \"axisLabel\": { \"color\": \"#94a3b8\" }\n  },\n  \"yAxis\": {\n    \"type\": \"value\",\n    \"axisLabel\": { \"color\": \"#94a3b8\" }\n  },\n  \"series\": [{\n    \"name\": \"Complaints\",\n    \"type\": \"bar\",\n    \"data\": [{{#each data}}{{count}}{{#unless @last}},{{/unless}}{{/each}}],\n    \"itemStyle\": {\n      \"color\": \"#ef4444\",\n      \"borderRadius\": [4, 4, 0, 0]\n    }\n  }]\n}\n```\n\n---\n\n### Example 6: Unassigned Students Table (from capacity_demand_dashboard.html)\n\n**ClickHouse Query:**\n```sql\nSELECT \n  reason,\n  count() as count\nFROM unassigned_students \nGROUP BY reason \nORDER BY count DESC\nLIMIT 10\n```\n\n**Handlebars Template:**\n```handlebars\n{\n  \"columns\": [\n    { \"key\": \"reason\", \"label\": \"Reason\", \"icon\": \"lucide:alert-circle\" },\n    { \"key\": \"count\", \"label\": \"Count\", \"icon\": \"lucide:hash\", \"align\": \"right\" }\n  ],\n  \"rows\": [\n    {{#each data}}\n    {\n      \"reason\": \"{{reason}}\",\n      \"count\": \"{{count}}\"\n    }{{#unless @last}},{{/unless}}\n    {{/each}}\n  ]\n}\n```\n\n---\n\n### Example 7: Vehicle Types (from capacity_demand_dashboard.html)\n\n**ClickHouse Query:**\n```sql\nSELECT \n  vehicle_type,\n  count() as routes,\n  sum(student_count) as students,\n  sum(capacity) as capacity,\n  round(avg(utilization), 1) as utilization\nFROM school_routes \nGROUP BY vehicle_type \nORDER BY capacity DESC\n```\n\n**Handlebars Template:**\n```handlebars\n{\n  \"columns\": [\n    { \"key\": \"vehicle_type\", \"label\": \"Vehicle Type\", \"icon\": \"lucide:bus\" },\n    { \"key\": \"routes\", \"label\": \"Routes\", \"icon\": \"lucide:route\", \"align\": \"right\" },\n    { \"key\": \"students\", \"label\": \"Students\", \"icon\": \"lucide:users\", \"align\": \"right\" },\n    { \"key\": \"capacity\", \"label\": \"Capacity\", \"icon\": \"lucide:maximize\", \"align\": \"right\" },\n    { \"key\": \"utilization\", \"label\": \"Utilization %\", \"icon\": \"lucide:percent\", \"align\": \"right\" }\n  ],\n  \"rows\": [\n    {{#each data}}\n    {\n      \"vehicle_type\": \"{{vehicle_type}}\",\n      \"routes\": \"{{routes}}\",\n      \"students\": \"{{students}}\",\n      \"capacity\": \"{{capacity}}\",\n      \"utilization\": \"{{utilization}}%\"\n    }{{#unless @last}},{{/unless}}\n    {{/each}}\n  ]\n}\n```\n\n---\n\n### Example 8: Cost Structure Line Chart (from financial_dashboard.html)\n\n**ClickHouse Query:**\n```sql\nSELECT \n  region_ar as region,\n  base_cost_per_student_sar as cost\nFROM support_data_report10_cost_per_student_structure\nORDER BY cost DESC\nLIMIT 10\n```\n\n**Handlebars Template:**\n```handlebars\n{\n  \"title\": {\n    \"text\": \"Cost per Student by Region\",\n    \"textStyle\": { \"color\": \"#FFFFFF\", \"fontSize\": 14 }\n  },\n  \"tooltip\": { \"trigger\": \"axis\" },\n  \"xAxis\": {\n    \"type\": \"category\",\n    \"data\": [{{#each data}}\"{{region}}\"{{#unless @last}},{{/unless}}{{/each}}],\n    \"axisLabel\": { \"color\": \"#94a3b8\", \"rotate\": 45 }\n  },\n  \"yAxis\": {\n    \"type\": \"value\",\n    \"axisLabel\": { \"color\": \"#94a3b8\" }\n  },\n  \"series\": [{\n    \"name\": \"Cost (SAR)\",\n    \"type\": \"line\",\n    \"data\": [{{#each data}}{{cost}}{{#unless @last}},{{/unless}}{{/each}}],\n    \"smooth\": true,\n    \"lineStyle\": { \"color\": \"#10b981\", \"width\": 2 },\n    \"areaStyle\": {\n      \"color\": {\n        \"type\": \"linear\",\n        \"x\": 0, \"y\": 0, \"x2\": 0, \"y2\": 1,\n        \"colorStops\": [\n          { \"offset\": 0, \"color\": \"rgba(16, 185, 129, 0.3)\" },\n          { \"offset\": 1, \"color\": \"rgba(16, 185, 129, 0.05)\" }\n        ]\n      }\n    }\n  }]\n}\n```\n\n---\n\n## \ud83c\udfa8 THEME & STYLING\n\n**Colors:**\n- Primary: #6366F1 (Indigo)\n- Accent: #8B5CF6 (Purple)\n- Success: #10b981 (Green)\n- Warning: #f59e0b (Amber)\n- Danger: #ef4444 (Red)\n- Info: #06b6d4 (Cyan)\n- Background: #17181C\n- Border: #2A2C33\n\n**Icons:**\n- Use Iconify lucide set: `\"lucide:icon-name\"`\n- NO EMOJIS\n\n## \u26a0\ufe0f COMMON MISTAKES TO AVOID\n\n### \u274c WRONG: Using PostgreSQL\n```json\n{\n  \"query\": {\n    \"sql\": \"SELECT * FROM table\",\n    \"sourceType\": \"postgresql\"  // WRONG - Use clickhouse\n  }\n}\n```\n\n### \u2705 CORRECT: Using ClickHouse\n```json\n{\n  \"query\": {\n    \"sql\": \"SELECT * FROM table\",\n    \"sourceType\": \"clickhouse\"  // CORRECT\n  }\n}\n```\n\n### \u274c WRONG: PostgreSQL syntax\n```sql\nSELECT COUNT(*) FROM table  -- Wrong for ClickHouse\n```\n\n### \u2705 CORRECT: ClickHouse syntax\n```sql\nSELECT count() FROM table  -- Correct ClickHouse function\n```\n\n### \u274c WRONG: Missing braces\n```handlebars\n{ \"value\": count }  // Missing {{}}\n```\n\n### \u2705 CORRECT: With braces\n```handlebars\n{ \"value\": {{count}} }\n```\n\n## \ud83d\udd0d ClickHouse vs PostgreSQL Differences\n\n### Functions\n| PostgreSQL | ClickHouse | Usage |\n|------------|------------|-------|\n| `COUNT(*)` | `count()` | Count rows |\n| `SUM(col)` | `sum(col)` | Sum values |\n| `AVG(col)` | `avg(col)` | Average |\n| `ROUND(val, 2)` | `round(val, 2)` | Rounding |\n| `COUNT(DISTINCT col)` | `uniq(col)` | Unique count |\n| `NOW()` | `now()` | Current timestamp |\n\n### Type Casting\n| PostgreSQL | ClickHouse |\n|------------|------------|\n| `col::numeric` | `toFloat64(col)` |\n| `col::text` | `toString(col)` |\n| `col::integer` | `toInt32(col)` |\n\n### String Functions\n| PostgreSQL | ClickHouse |\n|------------|------------|\n| `UPPER(col)` | `upper(col)` |\n| `LOWER(col)` | `lower(col)` |\n| `CONCAT(a, b)` | `concat(a, b)` |\n\n## \ud83c\udfaf WORKFLOW CHECKLIST\n\nBefore creating any component:\n1. [ ] Identify the component type (stat-card, table, chart)\n2. [ ] Check available ClickHouse tables (students, schools, school_routes, etc.)\n3. [ ] Write ClickHouse query with correct syntax\n4. [ ] Determine if single-row or multi-row result\n5. [ ] Select appropriate Handlebars pattern\n6. [ ] Verify all `{{variables}}` have braces\n7. [ ] Add `\"sourceType\": \"clickhouse\"` to query\n8. [ ] Use Iconify lucide icons (no emojis)\n\n## \ud83d\udca1 BEST PRACTICES\n\n1. **Always use ClickHouse functions**: `count()` not `COUNT(*)`\n2. **Use proper type casting**: `toFloat64()`, `toString()`\n3. **LIMIT results**: Always add `LIMIT` for tables and charts\n4. **ORDER BY**: Use `ORDER BY` for meaningful sequences\n5. **Group by first**: When aggregating, always GROUP BY\n6. **Real tables only**: Use tables from the list above\n7. **Test queries mentally**: Ensure syntax is valid ClickHouse\n\n## \ud83d\ude80 RESPONSE STYLE\n\nWhen user requests a dashboard:\n1. **Explain** what you're creating\n2. **Show** the ClickHouse query you'll use\n3. **Mention** the Handlebars pattern (single-row vs multi-row)\n4. **Use tools** to create components (never just describe)\n5. **Verify** component uses `\"sourceType\": \"clickhouse\"`\n\n## \ud83d\udccb GRID LAYOUT PATTERNS\n\n### Sales Dashboard\n```\nkpi1  kpi2  kpi3\nchart chart table\n```\n```json\n{\n  \"columns\": \"1fr 1fr 1fr\",\n  \"rows\": \"auto 1fr\",\n  \"gap\": \"16px\",\n  \"templateAreas\": [\"kpi1 kpi2 kpi3\", \"chart chart table\"]\n}\n```\n\n### Analytics Dashboard\n```\nkpi1  kpi2\nchart1 chart2\n```\n```json\n{\n  \"columns\": \"1fr 1fr\",\n  \"rows\": \"auto 1fr\",\n  \"gap\": \"16px\",\n  \"templateAreas\": [\"kpi1 kpi2\", \"chart1 chart2\"]\n}\n```\n\n---\n\n**Remember**: You're recreating the `/apps` dashboards using the dashboard builder. Use the exact same ClickHouse tables and queries. Always set `\"sourceType\": \"clickhouse\"` and use ClickHouse syntax (`count()`, `toFloat64()`, etc.).\n\nYour goal: Create working dashboards on the first try using real data from ClickHouse! \ud83d\ude80\n",
        "isConfigured": true,
        "isExpanded": false,
        "variablesMode": false,
        "agentColor": "#EF4444",
        "label": "system_prompt"
      }
    },
    {
      "nodeId": "imported_1762780205839_2",
      "nodeType": "prompt",
      "label": "prompt",
      "positionX": 700,
      "positionY": -60,
      "data": {
        "prompt": "{{prompt}}",
        "isConfigured": true,
        "isExpanded": false,
        "variablesMode": true,
        "agentColor": "#EF4444",
        "label": "prompt"
      }
    },
    {
      "nodeId": "imported_1762780205839_3",
      "nodeType": "tool_custom_frontend",
      "label": "Get Dashboard",
      "positionX": 300,
      "positionY": 600,
      "data": {
        "agentColor": "#EF4444",
        "isExpanded": false,
        "isConfigured": true,
        "label": "Get Dashboard",
        "color": "#6366F1",
        "type": "frontend",
        "toolTitle": "get_dashboard",
        "toolDescription": "Retrieve the complete current dashboard state including grid layout configuration and all components. Use this to understand what's currently in the dashboard before making changes.",
        "customToolZodSchema": "z.object({})"
      }
    },
    {
      "nodeId": "imported_1762780205839_4",
      "nodeType": "tool_custom_frontend",
      "label": "Set Grid Layout",
      "positionX": -100,
      "positionY": 600,
      "data": {
        "agentColor": "#EF4444",
        "isExpanded": false,
        "isConfigured": true,
        "label": "Set Grid Layout",
        "color": "#6366F1",
        "type": "frontend",
        "toolTitle": "set_grid_layout",
        "toolDescription": "Configure the dashboard grid layout including columns, rows, gap, and template areas. Template areas define named grid regions where components can be placed.",
        "customToolZodSchema": "z.object({columns: z.string().describe('CSS grid columns like 1fr 1fr 1fr'), rows: z.string().describe('CSS grid rows like auto 1fr 1fr'), gap: z.string().describe('Gap like 16px or 1rem'), templateAreas: z.array(z.string()).describe('Grid template areas array')})"
      }
    },
    {
      "nodeId": "imported_1762780205839_5",
      "nodeType": "tool_custom_frontend",
      "label": "Create Component",
      "positionX": 100,
      "positionY": 800,
      "data": {
        "agentColor": "#EF4444",
        "isExpanded": false,
        "isConfigured": true,
        "label": "Create Component",
        "color": "#6366F1",
        "type": "frontend",
        "toolTitle": "create_component",
        "toolDescription": "Create chart/table/stat-card. Use static data OR ClickHouse query + Handlebars template. CRITICAL QUOTING: String values MUST be quoted: \"{{name}}\", \"{{region}}\". Number values NO quotes: {{count}}, {{total}}. In tables: ALWAYS quote everything. Single-row: {{field}} directly. Multi-row: {{#each data}}{{field}}{{/each}}. Returns ClickHouse response + transformed data.",
        "customToolZodSchema": "z.object({id: z.string().describe('Unique component ID like sales_chart or user_table'), type: z.enum(['chart', 'table', 'stat-card']).describe('Component type: chart (ECharts), table (data table), or stat-card (KPI card)'), gridArea: z.string().describe('Grid area name from layout'), title: z.string().optional().describe('Optional component title'), description: z.string().optional().describe('Optional description'), data: z.any().describe('Component data: ECharts options for chart, {columns, rows} for table, {value, label, trend} for stat-card. Can be empty {} if using query'), query: z.object({sql: z.string().describe('PostgreSQL query to fetch data'), handlebarsTemplate: z.string().optional().describe('Transform SQL to component data. MUST use {{braces}} on all variables. CRITICAL: Quote strings \"{{name}}\" but NOT numbers {{count}}. Single-row: {{field}}. Multi-row: {{#each data}}{{field}}{{/each}}. Quote table values. Helpers: {{uppercase}}, {{default}}, {{get}}, etc.'), alasqlTransform: z.string().optional().describe('AlaSQL query to further transform data (optional, usually not needed)')}).optional().describe('Optional: Fetch data from PostgreSQL and transform with Handlebars'), style: z.any().optional().describe('Custom container styles')})"
      }
    },
    {
      "nodeId": "imported_1762780205839_6",
      "nodeType": "tool_custom_frontend",
      "label": "Update Component",
      "positionX": 500,
      "positionY": 800,
      "data": {
        "agentColor": "#EF4444",
        "isExpanded": false,
        "isConfigured": true,
        "label": "Update Component",
        "color": "#6366F1",
        "type": "frontend",
        "toolTitle": "update_component",
        "toolDescription": "Update component. Operations: set (replace), push (array add), splice (remove), merge (deep merge). Use path for nested updates. Handlebars rules: ALL variables need {{braces}}. Returns PostgreSQL response + data.",
        "customToolZodSchema": "z.object({id: z.string().describe('Component ID to update'), path: z.string().optional().describe('JSONPath for nested updates like data.series[0].data'), updates: z.any().optional().describe('New value or data to apply'), operation: z.enum(['set', 'push', 'splice', 'merge']).optional().default('set').describe('Operation: set=replace, push=add to array, splice=remove from array, merge=deep merge'), operationParams: z.any().optional().describe('Extra params for splice: {start, deleteCount, items}')})"
      }
    },
    {
      "nodeId": "imported_1762780205839_7",
      "nodeType": "tool_custom_frontend",
      "label": "Remove Component",
      "positionX": 700,
      "positionY": 600,
      "data": {
        "agentColor": "#EF4444",
        "isExpanded": false,
        "isConfigured": true,
        "label": "Remove Component",
        "color": "#6366F1",
        "type": "frontend",
        "toolTitle": "remove_component",
        "toolDescription": "Remove a component from the dashboard by its ID. The component will be completely deleted from the dashboard state.",
        "customToolZodSchema": "z.object({id: z.string().describe('ID of the component to remove')})"
      }
    },
    {
      "nodeId": "imported_1762780205839_8",
      "nodeType": "tool_custom_frontend",
      "label": "Get Component",
      "positionX": 100,
      "positionY": 1000,
      "data": {
        "agentColor": "#EF4444",
        "isExpanded": false,
        "isConfigured": true,
        "label": "Get Component",
        "color": "#6366F1",
        "type": "frontend",
        "toolTitle": "get_component",
        "toolDescription": "Retrieve a specific component's full configuration by its ID. Returns the component's type, title, data, config, and grid area placement.",
        "customToolZodSchema": "z.object({id: z.string().describe('ID of the component to retrieve')})"
      }
    },
    {
      "nodeId": "main-agent",
      "nodeType": "agent",
      "label": "Chart Builder",
      "positionX": 300,
      "positionY": 200,
      "data": {
        "id": "cmhijn9sv0007qggw7c4ipwm3",
        "label": "Chart Builder",
        "subtitle": "AI Agent",
        "status": "offline",
        "description": null,
        "icon": "tool",
        "color": "#EF4444",
        "toolsCount": 0,
        "componentsCount": 0,
        "mcpCount": 0,
        "knowledgeBaseCount": 0,
        "configNodesCount": 3,
        "toolNodesCount": 6
      }
    }
  ],
  "edges": [
    {
      "edgeId": "edge_1762780205839_l769yn6i2",
      "sourceId": "imported_1762780205839_0",
      "targetId": "main-agent",
      "targetHandle": "config",
      "edgeType": "custom"
    },
    {
      "edgeId": "edge_1762780205839_59xbufdxn",
      "sourceId": "imported_1762780205839_1",
      "targetId": "main-agent",
      "targetHandle": "config",
      "edgeType": "custom"
    },
    {
      "edgeId": "edge_1762780205839_nfgbpt8b7",
      "sourceId": "imported_1762780205839_2",
      "targetId": "main-agent",
      "targetHandle": "config",
      "edgeType": "custom"
    },
    {
      "edgeId": "edge_1762780205839_9j5ajdrp8",
      "sourceId": "imported_1762780205839_4",
      "targetId": "main-agent",
      "targetHandle": "features",
      "edgeType": "custom"
    },
    {
      "edgeId": "edge_1762780205839_cvbjebmfp",
      "sourceId": "imported_1762780205839_3",
      "targetId": "main-agent",
      "targetHandle": "features",
      "edgeType": "custom"
    },
    {
      "edgeId": "edge_1762780205839_pkxtar6al",
      "sourceId": "imported_1762780205839_8",
      "targetId": "main-agent",
      "targetHandle": "features",
      "edgeType": "custom"
    },
    {
      "edgeId": "edge_1762780205839_91zbtyhct",
      "sourceId": "imported_1762780205839_7",
      "targetId": "main-agent",
      "targetHandle": "features",
      "edgeType": "custom"
    },
    {
      "edgeId": "edge_1762780205839_9092id1i4",
      "sourceId": "imported_1762780205839_5",
      "targetId": "main-agent",
      "targetHandle": "features",
      "edgeType": "custom"
    },
    {
      "edgeId": "edge_1762780205839_cduue29v9",
      "sourceId": "imported_1762780205839_6",
      "targetId": "main-agent",
      "targetHandle": "features",
      "edgeType": "custom"
    }
  ],
  "metadata": {
    "totalNodes": 17,
    "totalSystemNodes": 16,
    "totalEdges": 16,
    "nodeTypes": [
      "model",
      "system_prompt",
      "prompt",
      "tool_custom_frontend",
      "mcp_postgresql",
      "mcpTool",
      "agent"
    ],
    "hasAgentNode": true
  },
  "nodeTypes": [
    "model",
    "system_prompt",
    "prompt",
    "tool_custom_frontend",
    "agent"
  ]
}